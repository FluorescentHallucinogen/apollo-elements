{"version":3,"sources":["webpack://hybrids/webpack/universalModuleDefinition","webpack://hybrids/webpack/bootstrap","webpack://hybrids/./src/utils.js","webpack://hybrids/./src/property.js","webpack://hybrids/./src/render.js","webpack://hybrids/./src/cache.js","webpack://hybrids/./src/define.js","webpack://hybrids/./src/parent.js","webpack://hybrids/./src/children.js","webpack://hybrids/./src/template/utils.js","webpack://hybrids/./src/template/resolvers/array.js","webpack://hybrids/./src/template/resolvers/value.js","webpack://hybrids/./src/template/resolvers/event.js","webpack://hybrids/./src/template/resolvers/class.js","webpack://hybrids/./src/template/resolvers/style.js","webpack://hybrids/./src/template/resolvers/property.js","webpack://hybrids/./src/template/core.js","webpack://hybrids/./src/template/resolve.js","webpack://hybrids/./src/template/index.js","webpack://hybrids/./src/index.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","camelToDash","str","replace","toLowerCase","dispatch","host","eventType","options","arguments","length","undefined","dispatchEvent","CustomEvent","_objectSpread","bubbles","shadyCSS","fn","fallback","shady","ShadyCSS","nativeShadow","stringifyElement","element","tagName","String","concat","IS_IE","defaultTransform","v","objectTransform","_typeof","TypeError","freeze","connect","type","transform","Number","Boolean","set","val","oldValue","invalidate","attrName","hasAttribute","attrValue","getAttribute","map","WeakMap","cache","FPS_THRESHOLD","queue","addToQueue","event","target","composedPath","currentTarget","requestAnimationFrame","update","index","startTime","performance","now","nextTime","has","prevUpdate","nextUpdate","styleElement","e","forEach","styleSubtree","indexOf","push","render","customOptions","render_typeof","render_objectSpread","shadowRoot","Error","shadowRootInit","assign","attachShadow","addEventListener","removeEventListener","delete","entries","getEntry","targetMap","Map","entry","deps","Set","state","checksum","calculateChecksum","_ref","context","dispatchInvalidate","composed","defaultMethod","compile","Hybrid","hybrids","connects","keys","config","define_typeof","add","parentContext","clear","nextValue","this","newValue","_this","setter","callback","configurable","process","clearValue","defineElement","hybridsOrConstructor","CustomElement","customElements","_HTMLElement","_classCallCheck","_possibleConstructorReturn","_getPrototypeOf","apply","_inherits","_wrapNativeSuper","HTMLElement","_this2","list","constructor","reduce","acc","result","defineMap","elements","parent","hybridsOrFn","node","parentElement","parentNode","walk","children","deep","nested","items","Array","from","child","observer","MutationObserver","childEventListener","size","Promise","resolve","then","observe","childList","subtree","disconnect","document","dataMap","defaultValue","getTemplateEnd","data","endNode","removeTemplate","startNode","lastNextSibling","nextSibling","removeChild","arrayMap","resolveArray","lastEntries","item","id","placeholder","available","ids","filter","previousSibling","lastIndex","matchedEntry","find","insertBefore","prevNode","nextNode","movePlaceholder","resolveValue","createTextNode","isArray","value_typeof","textContent","eventMap","classMap","resolveClassList","previousList","className","class_typeof","normalizeValue","classList","remove","styleMap","resolveStyle","style_typeof","previousMap","nextMap","dashKey","styleValue","style","setProperty","removeProperty","resolveProperty","propertyName","isSVG","substr","lastValue","event_typeof","resolveEventListener","resolveStyleList","SVGElement","removeAttribute","setAttribute","TIMESTAMP","Date","getPlaceholder","PLACEHOLDER_REGEXP_TEXT","PLACEHOLDER_REGEXP_EQUAL","RegExp","PLACEHOLDER_REGEXP_ALL","ATTR_PREFIX","ATTR_REGEXP","preparedTemplates","createWalker","core_typeof","ShadyDOM","inUse","currentNode","childNodes","createTreeWalker","NodeFilter","SHOW_ELEMENT","SHOW_TEXT","container","createElement","rawParts","styles","template","parts","signature","part","slice","join","match","createSignature","innerHTML","content","appendChild","svgRoot","firstChild","fragment","iterator","createNodeIterator","SHOW_COMMENT","test","replaceComments","compileWalker","compileIndex","_loop","nodeType","Node","TEXT_NODE","text","results","_acc$pop$split2","_slicedToArray","pop","split","before","next","equal","ELEMENT_NODE","attributes","attr","trim","partialName","args","importNode","clone","cloneNode","querySelectorAll","count","prepareTemplate","applyShadyCSS","renderWalker","clonedParts","renderIndex","currentPart","shift","markers","previousChild","_ref2","lastArgs","promiseMap","promise","delay","timeout","setTimeout","clearTimeout","PLACEHOLDER","templatesMap","stylesMap","helpers","defineElements","_len","_key","html","_len2","_key2","svg","_len3","_key3","__webpack_exports__","define_define","parent_parent","render_render"],"mappings":"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","file":"hybrids.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"hybrids\"] = factory();\n\telse\n\t\troot[\"hybrids\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","export function camelToDash(str) {\n  return str.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\n}\n\nexport function pascalToDash(str) {\n  return camelToDash(str.replace(/((?!([A-Z]{2}|^))[A-Z])/g, '-$1'));\n}\n\nexport function dispatch(host, eventType, options = {}) {\n  return host.dispatchEvent(new CustomEvent(eventType, { bubbles: false, ...options }));\n}\n\nexport function shadyCSS(fn, fallback) {\n  const shady = window.ShadyCSS;\n\n  /* istanbul ignore next */\n  if (shady && !shady.nativeShadow) {\n    return fn(shady);\n  }\n\n  return fallback;\n}\n\nexport function stringifyElement(element) {\n  const tagName = String(element.tagName).toLowerCase();\n  return `<${tagName}>`;\n}\n\nexport const IS_IE = 'ActiveXObject' in window;\n","import { camelToDash } from './utils';\n\nconst defaultTransform = v => v;\n\nconst objectTransform = (value) => {\n  if (typeof value !== 'object') {\n    throw TypeError(`Assigned value must be an object: ${typeof v}`);\n  }\n  return value && Object.freeze(value);\n};\n\nexport default function property(value, connect) {\n  const type = typeof value;\n  let transform = defaultTransform;\n\n  switch (type) {\n    case 'string':\n      transform = String;\n      break;\n    case 'number':\n      transform = Number;\n      break;\n    case 'boolean':\n      transform = Boolean;\n      break;\n    case 'function':\n      transform = value;\n      value = transform();\n      break;\n    case 'object':\n      if (value) Object.freeze(value);\n      transform = objectTransform;\n      break;\n    default: break;\n  }\n\n  return {\n    get: (host, val = value) => val,\n    set: (host, val, oldValue) => transform(val, oldValue),\n    connect: type !== 'object' && type !== 'undefined'\n      ? (host, key, invalidate) => {\n        if (host[key] === value) {\n          const attrName = camelToDash(key);\n\n          if (host.hasAttribute(attrName)) {\n            const attrValue = host.getAttribute(attrName);\n            host[key] = attrValue !== '' ? attrValue : true;\n          }\n        }\n\n        return connect && connect(host, key, invalidate);\n      }\n      : connect,\n  };\n}\n","import { shadyCSS } from './utils';\n\nconst map = new WeakMap();\nconst cache = new WeakMap();\nconst FPS_THRESHOLD = 1000 / 60; // 60 FPS ~ 16,67ms time window\nlet queue = [];\n\nexport function update(index = 0, startTime = 0) {\n  if (startTime && (performance.now() - startTime > FPS_THRESHOLD)) {\n    requestAnimationFrame(() => update(index));\n  } else {\n    const target = queue[index];\n    const nextTime = performance.now();\n\n    if (!target) {\n      shadyCSS(shady => queue.forEach(t => shady.styleSubtree(t)));\n      queue = [];\n    } else {\n      if (map.has(target)) {\n        const key = map.get(target);\n        const prevUpdate = cache.get(target);\n        try {\n          const nextUpdate = target[key];\n          if (nextUpdate !== prevUpdate) {\n            cache.set(target, nextUpdate);\n            nextUpdate();\n            if (!prevUpdate) shadyCSS(shady => shady.styleElement(target));\n          }\n        } catch (e) {\n          update(index + 1, nextTime);\n          throw e;\n        }\n      }\n      update(index + 1, nextTime);\n    }\n  }\n}\n\nfunction addToQueue(event) {\n  const target = event.composedPath()[0];\n  if (target === event.currentTarget) {\n    if (!queue[0]) {\n      requestAnimationFrame((() => update()));\n    }\n    if (queue.indexOf(target) === -1) {\n      queue.push(target);\n    }\n  }\n}\n\nexport default function render(get, customOptions = {}) {\n  if (typeof get !== 'function') {\n    throw TypeError(`The first argument must be a function: ${typeof get}`);\n  }\n\n  const options = { shadowRoot: true, ...customOptions };\n\n  return {\n    get: (host) => {\n      const fn = get(host);\n      return () => fn(host, options.shadowRoot ? host.shadowRoot : host);\n    },\n    connect(host, key) {\n      if (map.has(host)) {\n        throw Error(`Render factory already used in '${map.get(host)}' key`);\n      }\n\n      if (options.shadowRoot && !host.shadowRoot) {\n        const shadowRootInit = { mode: 'open' };\n        if (typeof options.shadowRoot === 'object') {\n          Object.assign(shadowRootInit, options.shadowRoot);\n        }\n        host.attachShadow(shadowRootInit);\n      }\n\n      host.addEventListener('@invalidate', addToQueue);\n      map.set(host, key);\n\n      return () => {\n        host.removeEventListener('@invalidate', addToQueue);\n        map.delete(host);\n      };\n    },\n  };\n}\n","import { stringifyElement } from './utils';\n\nconst entries = new WeakMap();\nexport function getEntry(target, key) {\n  let targetMap = entries.get(target);\n  if (!targetMap) {\n    targetMap = new Map();\n    entries.set(target, targetMap);\n  }\n\n  let entry = targetMap.get(key);\n\n  if (!entry) {\n    entry = {\n      target,\n      key,\n      value: undefined,\n      deps: new Set(),\n      state: 1,\n      checksum: 0,\n    };\n    targetMap.set(key, entry);\n  }\n\n  return entry;\n}\n\nfunction calculateChecksum({ state, deps }) {\n  let checksum = state;\n  deps.forEach((entry) => {\n    // eslint-disable-next-line no-unused-expressions\n    entry.target[entry.key];\n    checksum += entry.state;\n  });\n\n  return checksum;\n}\n\nlet context = null;\nexport function get(target, key, getter) {\n  const entry = getEntry(target, key);\n\n  if (context === entry) {\n    context = null;\n    throw Error(`Circular '${key}' get invocation in '${stringifyElement(target)}'`);\n  }\n\n  if (context) {\n    context.deps.add(entry);\n  }\n\n  const parentContext = context;\n  context = entry;\n\n  if (entry.checksum && entry.checksum === calculateChecksum(entry)) {\n    context = parentContext;\n    return entry.value;\n  }\n\n  entry.deps.clear();\n\n  try {\n    const nextValue = getter(target, entry.value);\n\n    if (nextValue !== entry.value) {\n      entry.state += 1;\n      entry.value = nextValue;\n    }\n\n    entry.checksum = calculateChecksum(entry);\n    context = parentContext;\n  } catch (e) {\n    context = null;\n    throw e;\n  }\n\n  return entry.value;\n}\n\nexport function set(target, key, setter, value, callback) {\n  if (context) {\n    context = null;\n    throw Error(`Try to set '${key}' of '${stringifyElement(target)}' in get call`);\n  }\n\n  const entry = getEntry(target, key);\n  const newValue = setter(target, value, entry.value);\n\n  if (newValue !== entry.value) {\n    entry.state += 1;\n    entry.value = newValue;\n\n    callback();\n  }\n}\n\nexport function invalidate(target, key, clearValue) {\n  if (context) {\n    context = null;\n    throw Error(`Try to invalidate '${key}' in '${stringifyElement(target)}' get call`);\n  }\n\n  const entry = getEntry(target, key);\n\n  entry.checksum = 0;\n\n  if (clearValue) {\n    entry.value = undefined;\n  }\n}\n","import property from './property';\nimport render from './render';\n\nimport * as cache from './cache';\nimport { dispatch, pascalToDash } from './utils';\n\n/* istanbul ignore next */\ntry { process.env.NODE_ENV } catch(e) { var process = { env: { NODE_ENV: 'production' } }; } // eslint-disable-line\n\nfunction dispatchInvalidate(host) {\n  dispatch(host, '@invalidate', { bubbles: true, composed: true });\n}\n\nconst defaultMethod = (host, value) => value;\n\nfunction compile(Hybrid, hybrids) {\n  Hybrid.hybrids = hybrids;\n  Hybrid.connects = [];\n\n  Object.keys(hybrids).forEach((key) => {\n    const value = hybrids[key];\n    const type = typeof value;\n\n    let config;\n\n    if (type === 'function') {\n      config = key === 'render' ? render(value) : { get: value };\n    } else if (value === null || type !== 'object' || (type === 'object' && !value.get && !value.set && !value.connect)) {\n      config = property(value);\n    } else {\n      config = {\n        get: value.get || defaultMethod,\n        set: value.set || (!value.get && defaultMethod) || undefined,\n        connect: value.connect,\n      };\n    }\n\n    Object.defineProperty(Hybrid.prototype, key, {\n      get: function get() {\n        return cache.get(this, key, config.get);\n      },\n      set: config.set && function set(newValue) {\n        cache.set(this, key, config.set, newValue, () => dispatchInvalidate(this));\n      },\n      enumerable: true,\n      configurable: process.env.NODE_ENV !== 'production',\n    });\n\n    if (config.connect) {\n      Hybrid.connects.push(host => config.connect(host, key, (clearCache = true) => {\n        if (clearCache) cache.invalidate(host, key);\n        dispatchInvalidate(host);\n      }));\n    }\n  });\n}\n\nlet update;\n/* istanbul ignore else */\nif (process.env.NODE_ENV !== 'production') {\n  const walkInShadow = (node, fn) => {\n    fn(node);\n\n    Array.from(node.children)\n      .forEach(el => walkInShadow(el, fn));\n\n    if (node.shadowRoot) {\n      Array.from(node.shadowRoot.children)\n        .forEach(el => walkInShadow(el, fn));\n    }\n  };\n\n  const updateQueue = new Map();\n  update = (Hybrid, lastHybrids) => {\n    if (!updateQueue.size) {\n      Promise.resolve().then(() => {\n        walkInShadow(document.body, (node) => {\n          if (updateQueue.has(node.constructor)) {\n            const hybrids = updateQueue.get(node.constructor);\n            node.disconnectedCallback();\n\n            Object.keys(node.constructor.hybrids).forEach((key) => {\n              cache.invalidate(node, key, node[key] === hybrids[key]);\n            });\n\n            node.connectedCallback();\n            dispatchInvalidate(node);\n          }\n        });\n        updateQueue.clear();\n      });\n    }\n    updateQueue.set(Hybrid, lastHybrids);\n  };\n}\n\nconst connects = new WeakMap();\n\nfunction defineElement(tagName, hybridsOrConstructor) {\n  const type = typeof hybridsOrConstructor;\n  if (type !== 'object' && type !== 'function') {\n    throw TypeError(`Second argument must be an object or a function: ${type}`);\n  }\n\n  const CustomElement = window.customElements.get(tagName);\n\n  if (type === 'function') {\n    if (CustomElement !== hybridsOrConstructor) {\n      return window.customElements.define(tagName, hybridsOrConstructor);\n    }\n    return CustomElement;\n  }\n\n  if (CustomElement) {\n    if (CustomElement.hybrids === hybridsOrConstructor) {\n      return CustomElement;\n    }\n    if (process.env.NODE_ENV !== 'production' && CustomElement.hybrids) {\n      Object.keys(CustomElement.hybrids).forEach((key) => {\n        delete CustomElement.prototype[key];\n      });\n\n      const lastHybrids = CustomElement.hybrids;\n\n      compile(CustomElement, hybridsOrConstructor);\n      update(CustomElement, lastHybrids);\n\n      return CustomElement;\n    }\n\n    throw Error(`Element '${tagName}' already defined`);\n  }\n\n  class Hybrid extends HTMLElement {\n    static get name() { return tagName; }\n\n    connectedCallback() {\n      const list = this.constructor.connects.reduce((acc, fn) => {\n        const result = fn(this);\n        if (result) acc.add(result);\n        return acc;\n      }, new Set());\n\n      connects.set(this, list);\n      dispatchInvalidate(this);\n    }\n\n    disconnectedCallback() {\n      const list = connects.get(this);\n      list.forEach(fn => fn());\n    }\n  }\n\n  compile(Hybrid, hybridsOrConstructor);\n  customElements.define(tagName, Hybrid);\n\n  return Hybrid;\n}\n\nfunction defineMap(elements) {\n  return Object.keys(elements).reduce((acc, key) => {\n    const tagName = pascalToDash(key);\n    acc[key] = defineElement(tagName, elements[key]);\n\n    return acc;\n  }, {});\n}\n\nexport default function define(...args) {\n  if (typeof args[0] === 'object') {\n    return defineMap(args[0]);\n  }\n\n  return defineElement(...args);\n}\n","const map = new WeakMap();\n\ndocument.addEventListener('@invalidate', (event) => {\n  const set = map.get(event.composedPath()[0]);\n  if (set) set.forEach(fn => fn());\n});\n\nfunction walk(node, fn) {\n  let parentElement = node.parentElement || node.parentNode.host;\n\n  while (parentElement) {\n    const hybrids = parentElement.constructor.hybrids;\n\n    if (hybrids && fn(hybrids)) {\n      return parentElement;\n    }\n\n    parentElement = parentElement.parentElement\n      || (parentElement.parentNode && parentElement.parentNode.host);\n  }\n\n  return parentElement || null;\n}\n\nexport default function parent(hybridsOrFn) {\n  const fn = typeof hybridsOrFn === 'function' ? hybridsOrFn : hybrids => hybrids === hybridsOrFn;\n  return {\n    get: host => walk(host, fn),\n    connect(host, key, invalidate) {\n      const target = host[key];\n\n      if (target) {\n        let set = map.get(target);\n        if (!set) {\n          set = new Set();\n          map.set(target, set);\n        }\n\n        set.add(invalidate);\n\n        return () => {\n          set.delete(invalidate);\n          invalidate();\n        };\n      }\n\n      return false;\n    },\n  };\n}\n","function walk(node, fn, options, items = []) {\n  Array.from(node.children).forEach((child) => {\n    const hybrids = child.constructor.hybrids;\n    if (hybrids && fn(hybrids)) {\n      items.push(child);\n      if (options.deep && options.nested) {\n        walk(child, fn, options, items);\n      }\n    } else if (options.deep) {\n      walk(child, fn, options, items);\n    }\n  });\n\n  return items;\n}\n\nexport default function children(hybridsOrFn, options = { deep: false, nested: false }) {\n  const fn = typeof hybridsOrFn === 'function' ? hybridsOrFn : hybrids => hybrids === hybridsOrFn;\n  return {\n    get(host) { return walk(host, fn, options); },\n    connect(host, key, invalidate) {\n      const observer = new MutationObserver(invalidate);\n      const set = new Set();\n\n      const childEventListener = ({ target }) => {\n        if (!set.size) {\n          Promise.resolve().then(() => {\n            const list = host[key];\n            for (let i = 0; i < list.length; i += 1) {\n              if (set.has(list[i])) {\n                invalidate(false);\n                break;\n              }\n            }\n            set.clear();\n          });\n        }\n        set.add(target);\n      };\n\n      observer.observe(host, {\n        childList: true, subtree: !!options.deep,\n      });\n\n      host.addEventListener('@invalidate', childEventListener);\n\n      return () => {\n        observer.disconnect();\n        host.removeEventListener('@invalidate', childEventListener);\n      };\n    },\n  };\n}\n","const map = new WeakMap();\nexport const dataMap = {\n  get(key, defaultValue) {\n    if (map.has(key)) {\n      return map.get(key);\n    }\n\n    if (defaultValue !== undefined) {\n      map.set(key, defaultValue);\n    }\n\n    return defaultValue;\n  },\n  set(key, value) {\n    map.set(key, value);\n    return value;\n  },\n};\n\nexport function getTemplateEnd(node) {\n  let data;\n  // eslint-disable-next-line no-cond-assign\n  while (node && (data = dataMap.get(node)) && data.endNode) {\n    node = data.endNode;\n  }\n\n  return node;\n}\n\nexport function removeTemplate(target) {\n  const data = dataMap.get(target);\n  const startNode = data.startNode;\n\n  if (startNode) {\n    const endNode = getTemplateEnd(data.endNode);\n\n    let node = startNode;\n    const lastNextSibling = endNode.nextSibling;\n\n    while (node) {\n      const nextSibling = node.nextSibling;\n      node.parentNode.removeChild(node);\n      node = nextSibling !== lastNextSibling && nextSibling;\n    }\n  }\n}\n","import {\n  dataMap, removeTemplate, getTemplateEnd,\n} from '../utils';\n\n// eslint-disable-next-line import/no-cycle\nimport resolveValue from './value';\n\nconst arrayMap = new WeakMap();\n\nfunction movePlaceholder(target, previousSibling) {\n  const data = dataMap.get(target);\n  const startNode = data.startNode;\n  const endNode = getTemplateEnd(data.endNode);\n\n  previousSibling.parentNode.insertBefore(target, previousSibling.nextSibling);\n\n  let prevNode = target;\n  let node = startNode;\n  while (node) {\n    const nextNode = node.nextSibling;\n    prevNode.parentNode.insertBefore(node, prevNode.nextSibling);\n    prevNode = node;\n    node = nextNode !== endNode.nextSibling && nextNode;\n  }\n}\n\nexport default function resolveArray(host, target, value) {\n  let lastEntries = arrayMap.get(target);\n  const entries = value.map((item, index) => ({\n    id: Object.prototype.hasOwnProperty.call(item, 'id') ? item.id : index,\n    value: item,\n    placeholder: null,\n    available: true,\n  }));\n\n  arrayMap.set(target, entries);\n\n  if (lastEntries) {\n    const ids = new Set();\n    entries.forEach(entry => ids.add(entry.id));\n\n    lastEntries = lastEntries.filter((entry) => {\n      if (!ids.has(entry.id)) {\n        removeTemplate(entry.placeholder);\n        entry.placeholder.parentNode.removeChild(entry.placeholder);\n        return false;\n      }\n\n      return true;\n    });\n  }\n\n  let previousSibling = target;\n  const lastIndex = value.length - 1;\n  const data = dataMap.get(target);\n\n  entries.forEach((entry, index) => {\n    const matchedEntry = lastEntries\n      && lastEntries.find(item => item.available && item.id === entry.id);\n\n    let placeholder;\n    if (matchedEntry) {\n      matchedEntry.available = false;\n      placeholder = matchedEntry.placeholder;\n\n      if (placeholder.previousSibling !== previousSibling) {\n        movePlaceholder(placeholder, previousSibling);\n      }\n      if (matchedEntry.value !== entry.value) {\n        resolveValue(host, placeholder, entry.value);\n      }\n    } else {\n      placeholder = document.createTextNode('');\n      previousSibling.parentNode.insertBefore(placeholder, previousSibling.nextSibling);\n      resolveValue(host, placeholder, entry.value);\n    }\n\n    previousSibling = getTemplateEnd(dataMap.get(placeholder).endNode || placeholder);\n\n    if (index === 0) data.startNode = placeholder;\n    if (index === lastIndex) data.endNode = previousSibling;\n\n    entry.placeholder = placeholder;\n  });\n\n  if (lastEntries) {\n    lastEntries.forEach((entry) => {\n      if (entry.available) {\n        removeTemplate(entry.placeholder);\n        entry.placeholder.parentNode.removeChild(entry.placeholder);\n      }\n    });\n  }\n}\n","import { dataMap, removeTemplate } from '../utils';\n// eslint-disable-next-line import/no-cycle\nimport resolveArray from './array';\n\nexport default function resolveValue(host, target, value) {\n  const type = Array.isArray(value) ? 'array' : typeof value;\n  let data = dataMap.get(target, {});\n\n  if (data.type !== type) {\n    removeTemplate(target);\n    data = dataMap.set(target, { type });\n\n    if (target.textContent !== '') {\n      target.textContent = '';\n    }\n  }\n\n  switch (type) {\n    case 'function':\n      value(host, target);\n      break;\n    case 'array':\n      resolveArray(host, target, value);\n      break;\n    default:\n      target.textContent = type === 'number' || value ? value : '';\n  }\n}\n","const eventMap = new WeakMap();\n\nexport default function resolveEventListener(eventType) {\n  return (host, target, value, lastValue) => {\n    if (lastValue) {\n      target.removeEventListener(\n        eventType,\n        eventMap.get(lastValue),\n        lastValue.options !== undefined ? lastValue.options : false,\n      );\n    }\n\n    if (value) {\n      if (typeof value !== 'function') {\n        throw Error(`Event listener must be a function: ${typeof value}`);\n      }\n\n      eventMap.set(value, value.bind(null, host));\n\n      target.addEventListener(\n        eventType,\n        eventMap.get(value),\n        value.options !== undefined ? value.options : false,\n      );\n    }\n  };\n}\n","function normalizeValue(value, set = new Set()) {\n  if (Array.isArray(value)) {\n    value.forEach(className => set.add(className));\n  } else if (value !== null && typeof value === 'object') {\n    Object.keys(value).forEach(key => value[key] && set.add(key));\n  } else {\n    set.add(value);\n  }\n\n  return set;\n}\n\nconst classMap = new WeakMap();\n\nexport default function resolveClassList(host, target, value) {\n  const previousList = classMap.get(target) || new Set();\n  const list = normalizeValue(value);\n\n  classMap.set(target, list);\n\n  list.forEach((className) => {\n    target.classList.add(className);\n    previousList.delete(className);\n  });\n\n  previousList.forEach((className) => {\n    target.classList.remove(className);\n  });\n}\n","import { camelToDash, stringifyElement } from '../../utils';\n\nconst styleMap = new WeakMap();\n\nexport default function resolveStyle(host, target, value) {\n  if (value === null || typeof value !== 'object') {\n    throw TypeError(`Style value must be an object in ${stringifyElement(target)}:`, value);\n  }\n\n  const previousMap = styleMap.get(target) || new Map();\n\n  const nextMap = Object.keys(value).reduce((map, key) => {\n    const dashKey = camelToDash(key);\n    const styleValue = value[key];\n\n    if (!styleValue && styleValue !== 0) {\n      target.style.removeProperty(dashKey);\n    } else {\n      target.style.setProperty(dashKey, styleValue);\n    }\n\n    map.set(dashKey, styleValue);\n    previousMap.delete(dashKey);\n\n    return map;\n  }, new Map());\n\n  previousMap.forEach((styleValue, key) => { target.style[key] = ''; });\n\n  styleMap.set(target, nextMap);\n}\n","import resolveEventListener from './event';\nimport resolveClassList from './class';\nimport resolveStyleList from './style';\n\nexport default function resolveProperty(attrName, propertyName, isSVG) {\n  if (propertyName.substr(0, 2) === 'on') {\n    const eventType = propertyName.substr(2);\n    return resolveEventListener(eventType);\n  }\n\n  switch (attrName) {\n    case 'class': return resolveClassList;\n    case 'style': return resolveStyleList;\n    default:\n      return (host, target, value) => {\n        if (!isSVG && !(target instanceof SVGElement) && (propertyName in target)) {\n          if (target[propertyName] !== value) {\n            target[propertyName] = value;\n          }\n        } else if (value === false || value === undefined || value === null) {\n          target.removeAttribute(attrName);\n        } else {\n          const attrValue = value === true ? '' : String(value);\n          target.setAttribute(attrName, attrValue);\n        }\n      };\n  }\n}\n","import { stringifyElement, shadyCSS, IS_IE } from '../utils';\nimport { dataMap, removeTemplate } from './utils';\n\nimport resolveValue from './resolvers/value';\nimport resolveProperty from './resolvers/property';\n\n/* istanbul ignore next */\ntry { process.env.NODE_ENV } catch(e) { var process = { env: { NODE_ENV: 'production' } }; } // eslint-disable-line\n\nconst TIMESTAMP = Date.now();\n\nexport const getPlaceholder = (id = 0) => `{{h-${TIMESTAMP}-${id}}}`;\n\nconst PLACEHOLDER_REGEXP_TEXT = getPlaceholder('(\\\\d+)');\nconst PLACEHOLDER_REGEXP_EQUAL = new RegExp(`^${PLACEHOLDER_REGEXP_TEXT}$`);\nconst PLACEHOLDER_REGEXP_ALL = new RegExp(PLACEHOLDER_REGEXP_TEXT, 'g');\n\nconst ATTR_PREFIX = `--${TIMESTAMP}--`;\nconst ATTR_REGEXP = new RegExp(ATTR_PREFIX, 'g');\n\nconst preparedTemplates = new WeakMap();\n\n/* istanbul ignore next */\nfunction applyShadyCSS(template, tagName) {\n  if (!tagName) return template;\n\n  return shadyCSS((shady) => {\n    let map = preparedTemplates.get(template);\n    if (!map) {\n      map = new Map();\n      preparedTemplates.set(template, map);\n    }\n\n    let clone = map.get(tagName);\n\n    if (!clone) {\n      clone = document.createElement('template');\n      clone.content.appendChild(template.content.cloneNode(true));\n\n      map.set(tagName, clone);\n\n      const styles = clone.content.querySelectorAll('style');\n\n      Array.from(styles).forEach((style) => {\n        const count = style.childNodes.length + 1;\n        for (let i = 0; i < count; i += 1) {\n          style.parentNode.insertBefore(document.createTextNode(getPlaceholder()), style);\n        }\n      });\n\n      shady.prepareTemplate(clone, tagName.toLowerCase());\n    }\n    return clone;\n  }, template);\n}\n\nfunction createSignature(parts, styles) {\n  let signature = parts.reduce((acc, part, index) => {\n    if (index === 0) {\n      return part;\n    }\n    if (parts.slice(index).join('').match(/\\s*<\\/\\s*(table|tr|thead|tbody|tfoot|colgroup)>/)) {\n      return `${acc}<!--${getPlaceholder(index - 1)}-->${part}`;\n    }\n    return acc + getPlaceholder(index - 1) + part;\n  }, '');\n\n  if (styles) {\n    signature += `<style>\\n${styles.join('\\n/*------*/\\n')}\\n</style>`;\n  }\n\n  /* istanbul ignore if */\n  if (IS_IE) {\n    return signature.replace(\n      /style\\s*=\\s*([\"][^\"]+[\"]|['][^']+[']|[^\\s\"'<>/]+)/g,\n      match => `${ATTR_PREFIX}${match}`,\n    );\n  }\n\n  return signature;\n}\n\nfunction getPropertyName(string) {\n  return string.replace(/\\s*=\\s*['\"]*$/g, '').split(' ').pop();\n}\n\nfunction replaceComments(fragment) {\n  const iterator = document.createNodeIterator(fragment, NodeFilter.SHOW_COMMENT, null, false);\n  let node;\n  // eslint-disable-next-line no-cond-assign\n  while (node = iterator.nextNode()) {\n    if (PLACEHOLDER_REGEXP_EQUAL.test(node.textContent)) {\n      node.parentNode.insertBefore(document.createTextNode(node.textContent), node);\n      node.parentNode.removeChild(node);\n    }\n  }\n}\n\nexport function createInternalWalker(context) {\n  let node;\n\n  return {\n    get currentNode() { return node; },\n    nextNode() {\n      if (node === undefined) {\n        node = context.childNodes[0];\n      } else if (node.childNodes.length) {\n        node = node.childNodes[0];\n      } else if (node.nextSibling) {\n        node = node.nextSibling;\n      } else {\n        node = node.parentNode.nextSibling;\n      }\n\n      return !!node;\n    },\n  };\n}\n\nfunction createExternalWalker(context) {\n  return document.createTreeWalker(\n    context,\n    // eslint-disable-next-line no-bitwise\n    NodeFilter.SHOW_ELEMENT | NodeFilter.SHOW_TEXT,\n    null,\n    false,\n  );\n}\n\n/* istanbul ignore next */\nconst createWalker = typeof window.ShadyDOM === 'object' && window.ShadyDOM.inUse ? createInternalWalker : createExternalWalker;\n\nconst container = document.createElement('div');\nexport function compile(rawParts, isSVG, styles) {\n  const template = document.createElement('template');\n  const parts = [];\n\n  let signature = createSignature(rawParts, styles);\n  if (isSVG) signature = `<svg>${signature}</svg>`;\n\n  /* istanbul ignore if */\n  if (IS_IE) {\n    template.innerHTML = signature;\n  } else {\n    container.innerHTML = `<template>${signature}</template>`;\n    template.content.appendChild(container.children[0].content);\n  }\n\n  if (isSVG) {\n    const svgRoot = template.content.firstChild;\n    template.content.removeChild(svgRoot);\n    Array.from(svgRoot.childNodes).forEach(node => template.content.appendChild(node));\n  }\n\n  replaceComments(template.content);\n\n  const compileWalker = createWalker(template.content);\n  let compileIndex = 0;\n\n  while (compileWalker.nextNode()) {\n    const node = compileWalker.currentNode;\n\n    if (node.nodeType === Node.TEXT_NODE) {\n      const text = node.textContent;\n\n      if (!text.match(PLACEHOLDER_REGEXP_EQUAL)) {\n        const results = text.match(PLACEHOLDER_REGEXP_ALL);\n        if (results) {\n          let currentNode = node;\n          results\n            .reduce((acc, placeholder) => {\n              const [before, next] = acc.pop().split(placeholder);\n              if (before) acc.push(before);\n              acc.push(placeholder);\n              if (next) acc.push(next);\n              return acc;\n            }, [text])\n            .forEach((part, index) => {\n              if (index === 0) {\n                currentNode.textContent = part;\n              } else {\n                currentNode = currentNode.parentNode\n                  .insertBefore(document.createTextNode(part), currentNode.nextSibling);\n              }\n            });\n        }\n      }\n\n      const equal = node.textContent.match(PLACEHOLDER_REGEXP_EQUAL);\n      if (equal) {\n        /* istanbul ignore else */\n        if (!IS_IE) node.textContent = '';\n        parts[equal[1]] = [compileIndex, resolveValue];\n      }\n    } else {\n      /* istanbul ignore else */ // eslint-disable-next-line no-lonely-if\n      if (node.nodeType === Node.ELEMENT_NODE) {\n        Array.from(node.attributes).forEach((attr) => {\n          const value = attr.value.trim();\n          /* istanbul ignore next */\n          const name = IS_IE ? attr.name.replace(ATTR_PREFIX, '') : attr.name;\n          const equal = value.match(PLACEHOLDER_REGEXP_EQUAL);\n          if (equal) {\n            const propertyName = getPropertyName(rawParts[equal[1]]);\n            parts[equal[1]] = [compileIndex, resolveProperty(name, propertyName, isSVG)];\n            node.removeAttribute(attr.name);\n          } else {\n            const results = value.match(PLACEHOLDER_REGEXP_ALL);\n            if (results) {\n              const partialName = `attr__${name}`;\n\n              results.forEach((placeholder, index) => {\n                const [, id] = placeholder.match(PLACEHOLDER_REGEXP_EQUAL);\n                parts[id] = [compileIndex, (host, target, attrValue) => {\n                  const data = dataMap.get(target, {});\n                  data[partialName] = (data[partialName] || value).replace(placeholder, attrValue == null ? '' : attrValue);\n\n                  if ((results.length === 1) || (index + 1 === results.length)) {\n                    target.setAttribute(name, data[partialName]);\n                    data[partialName] = undefined;\n                  }\n                }];\n              });\n\n              attr.value = '';\n\n              /* istanbul ignore next */\n              if (IS_IE && name !== attr.name) {\n                node.removeAttribute(attr.name);\n                node.setAttribute(name, '');\n              }\n            }\n          }\n        });\n      }\n    }\n\n    compileIndex += 1;\n  }\n\n  return (host, target, args) => {\n    const data = dataMap.get(target, { type: 'function' });\n\n    if (template !== data.template) {\n      if (data.template) removeTemplate(target);\n\n      const fragment = document.importNode(applyShadyCSS(template, host.tagName).content, true);\n\n      const renderWalker = createWalker(fragment);\n      const clonedParts = parts.slice(0);\n\n      let renderIndex = 0;\n      let currentPart = clonedParts.shift();\n\n      const markers = [];\n\n      Object.assign(data, { template, markers });\n\n      while (renderWalker.nextNode()) {\n        const node = renderWalker.currentNode;\n\n        if (node.nodeType === Node.TEXT_NODE) {\n          /* istanbul ignore next */\n          if (PLACEHOLDER_REGEXP_EQUAL.test(node.textContent)) {\n            node.textContent = '';\n          } else if (IS_IE) {\n            node.textContent = node.textContent.replace(ATTR_REGEXP, '');\n          }\n        } else if (process.env.NODE_ENV !== 'production' && node.nodeType === Node.ELEMENT_NODE) {\n          if (node.tagName.indexOf('-') > -1 && !customElements.get(node.tagName.toLowerCase())) {\n            throw Error(`Missing '${stringifyElement(node)}' element definition in '${stringifyElement(host)}'`);\n          }\n        }\n\n        while (currentPart && currentPart[0] === renderIndex) {\n          markers.push([node, currentPart[1]]);\n          currentPart = clonedParts.shift();\n        }\n\n        renderIndex += 1;\n      }\n\n      const childList = Array.from(fragment.childNodes);\n\n      data.startNode = childList[0];\n      data.endNode = childList[childList.length - 1];\n\n      if (target.nodeType === Node.TEXT_NODE) {\n        let previousChild = target;\n        childList.forEach((child) => {\n          target.parentNode.insertBefore(child, previousChild.nextSibling);\n          previousChild = child;\n        });\n      } else {\n        target.appendChild(fragment);\n      }\n    }\n\n    data.markers.forEach(([node, fn], index) => {\n      if (data.lastArgs && data.lastArgs[index] === args[index]) return;\n      fn(host, node, args[index], data.lastArgs ? data.lastArgs[index] : undefined);\n    });\n\n    data.lastArgs = args;\n  };\n}\n","const promiseMap = new WeakMap();\n\nexport default function resolve(promise, placeholder, delay = 200) {\n  return (host, target) => {\n    let timeout;\n\n    if (placeholder) {\n      timeout = setTimeout(() => {\n        timeout = undefined;\n\n        requestAnimationFrame(() => {\n          placeholder(host, target);\n        });\n      }, delay);\n    }\n\n    promiseMap.set(target, promise);\n\n    promise.then((template) => {\n      if (timeout) clearTimeout(timeout);\n\n      if (promiseMap.get(target) === promise) {\n        template(host, target);\n        promiseMap.set(target, null);\n      }\n    });\n  };\n}\n","import defineElements from '../define';\n\nimport { compile, getPlaceholder } from './core';\nimport resolve from './resolve';\n\nconst PLACEHOLDER = getPlaceholder();\n\nconst templatesMap = new Map();\nconst stylesMap = new WeakMap();\n\nconst helpers = {\n  define(elements) {\n    defineElements(elements);\n    return this;\n  },\n  key(id) {\n    this.id = id;\n    return this;\n  },\n  style(...styles) {\n    stylesMap.set(this, styles);\n    return this;\n  },\n};\n\nfunction create(parts, args, isSVG) {\n  const fn = (host, target = host) => {\n    const styles = stylesMap.get(fn);\n    const id = `${parts.join(PLACEHOLDER)}${styles ? styles.join(PLACEHOLDER) : ''}${isSVG ? 'svg' : ''}`;\n\n    let render = templatesMap.get(id);\n    if (!render) {\n      render = compile(parts, isSVG, styles);\n      templatesMap.set(id, render);\n    }\n\n    render(host, target, args);\n  };\n\n  return Object.assign(fn, helpers);\n}\n\nexport function html(parts, ...args) {\n  return create(parts, args);\n}\n\nexport function svg(parts, ...args) {\n  return create(parts, args, true);\n}\n\nObject.assign(html, { resolve });\nObject.assign(svg, { resolve });\n","export { default as define } from './define';\nexport { default as property } from './property';\nexport { default as parent } from './parent';\nexport { default as children } from './children';\nexport { default as render } from './render';\n\nexport { dispatch } from './utils';\n\nexport { html, svg } from './template';\n"],"sourceRoot":""}